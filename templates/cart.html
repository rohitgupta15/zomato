{% extends "base.html" %}

{% block title %}Cart · FoodBooking{% endblock %}

{% block content %}
  <section class="section">
    <h2>Your Cart</h2>
    {% if items %}
      <div class="cart-list">
        {% for item in items %}
          <div class="cart-row">
            <div>
              <strong>{{ item.dish.name }}</strong>
              <div class="muted">{{ item.dish.restaurant.name }}</div>
            </div>
            <form method="post" action="{% url 'update_cart' item.dish.id %}">
              {% csrf_token %}
              <input class="qty" type="number" name="qty" min="1" value="{{ item.qty }}" />
              <button class="btn ghost" type="submit">Update</button>
            </form>
            <div class="price">₹{{ item.line_total }}</div>
            <a class="btn ghost" href="{% url 'remove_from_cart' item.dish.id %}">Remove</a>
          </div>
        {% endfor %}
      </div>
      <div class="cart-summary">
        <div>Total: <strong>₹{{ total }}</strong></div>
        <div class="action-row">
          <a class="btn primary" href="{% url 'checkout' %}">Proceed to Checkout</a>
          <a class="btn ghost" href="{% url 'clear_cart' %}">Clear Cart & Switch</a>
        </div>
      </div>
    {% else %}
      <p>Your cart is empty.</p>
      <a class="btn primary" href="{% url 'app_home' %}">Browse Dishes</a>
    {% endif %}
  </section>
{% endblock %}
