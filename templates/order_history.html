{% extends "base.html" %}

{% block title %}Order History - FoodBooking{% endblock %}

{% block content %}
  <section class="section">
    <h2>Your Orders</h2>
    {% if orders %}
      <div class="cart-list">
        {% for order in orders %}
          <div class="tile">
            <div class="order-head">
              <div>
                <strong>Order #{{ order.id }}</strong>
                <div class="muted">{{ order.created_at|date:"M d, Y H:i" }}</div>
              </div>
              <div class="price">₹{{ order.total_amount }}</div>
            </div>
            <div class="muted">Payment: {{ order.payment_method }}{% if order.is_paid %} (Paid){% endif %}</div>
            <ul class="order-items">
              {% for item in order.items.all %}
                <li>{{ item.dish.name }} × {{ item.quantity }}</li>
              {% endfor %}
            </ul>
            <a class="btn ghost" href="{% url 'invoice' order.id %}">View Invoice</a>
          </div>
        {% endfor %}
      </div>
    {% else %}
      <p>You have no orders yet.</p>
      <a class="btn primary" href="{% url 'app_home' %}">Start Ordering</a>
    {% endif %}
  </section>
{% endblock %}
