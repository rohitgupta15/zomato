{% extends "base.html" %}

{% block title %}Invoice - FoodBooking{% endblock %}

{% block content %}
  <section class="section">
    <h2>Invoice</h2>
    <div class="invoice-card">
      <div>
        <strong>Order ID:</strong> #{{ order.id }}
      </div>
      <div>
        <strong>Date:</strong> {{ order.created_at|date:"M d, Y H:i" }}
      </div>
      <div>
        <strong>Customer:</strong> {{ order.customer_name }} ({{ order.customer_phone }})
      </div>
      <div>
        <strong>Address:</strong> {{ order.address }}
      </div>
      <div>
        <strong>Payment:</strong> {{ order.payment_method }}
        {% if order.is_paid %}(Paid){% else %}(Pending){% endif %}
      </div>
    </div>

    <div class="cart-list">
      {% for item in items %}
        <div class="cart-row">
          <div>
            <strong>{{ item.dish.name }}</strong>
            <div class="muted">{{ item.dish.restaurant.name }}</div>
          </div>
          <div>Qty: {{ item.quantity }}</div>
          <div class="price">₹{{ item.price }}</div>
          <div class="price">₹{{ item.line_total }}</div>
        </div>
      {% endfor %}
    </div>

    <div class="cart-summary">
      <div>Total: <strong>₹{{ order.total_amount }}</strong></div>
      <div class="action-row">
        <a class="btn ghost" href="{% url 'app_home' %}">Back to Menu</a>
        <a class="btn primary" href="{% url 'invoice_pdf' order.id %}">Download PDF</a>
        <a class="btn ghost" href="{% url 'order_history' %}">Order History</a>
      </div>
    </div>
  </section>
{% endblock %}
